(function(){const e=document.createElement("style");e.innerHTML="#chat-widget-btn{position:fixed;bottom:30px;right:30px;background:#667eea;color:#fff;border:none;border-radius:50%;width:60px;height:60px;font-size:30px;cursor:pointer;z-index:9999;box-shadow:0 4px 16px rgba(0,0,0,.2)}#chat-widget-window{position:fixed;bottom:100px;right:30px;width:350px;max-width:95vw;height:420px;background:#fff;color:#222;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,.25);display:none;flex-direction:column;z-index:10000;overflow:hidden}#chat-widget-header{background:#667eea;color:#fff;padding:16px;font-size:1.1em;font-weight:700;text-align:center}#chat-widget-messages{flex:1;padding:12px;overflow-y:auto;background:#f7f7fb}#chat-widget-input{display:flex;border-top:1px solid #eee;background:#fff}#chat-widget-input input{flex:1;border:none;padding:12px;font-size:1em;outline:none;background:#fff}#chat-widget-input button{background:#667eea;color:#fff;border:none;padding:0 18px;font-size:1em;cursor:pointer;border-radius:0 0 16px 0}",document.head.appendChild(e);const t=document.createElement("button");t.id="chat-widget-btn",t.innerHTML="üí¨",document.body.appendChild(t);const n=document.createElement("div");n.id="chat-widget-window",n.innerHTML='<div id="chat-widget-header">–Æ—Ä–∏—Å—Ç –ö–∞–ª–∏–Ω–∏–Ω–∞ –û–∫—Å–∞–Ω–∞</div><div id="chat-widget-messages"></div><form id="chat-widget-input"><input type="text" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." autocomplete="off" /><button type="submit">‚Æû</button></form>',document.body.appendChild(n);const i=n.querySelector("#chat-widget-messages"),s=n.querySelector("#chat-widget-input"),a=s.querySelector("input");function d(){n.style.display="flex"===n.style.display?"none":"flex","flex"===n.style.display&&(a.focus(),i.children.length||o("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ø–æ–º–æ–≥—É –≤–∞–º –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –≤–æ–ø—Ä–æ—Å–∞–º:\n‚Ä¢ –°–µ–º–µ–π–Ω–æ–µ –ø—Ä–∞–≤–æ\n‚Ä¢ –ù–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ–ª–∞\n‚Ä¢ –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å\n‚Ä¢ –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞\n\n–ó–∞–¥–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å, –∏ —è –ø–æ–º–æ–≥—É –≤–∞–º –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é.","bot"))}function o(e,t){const n=document.createElement("div");n.style.margin="8px 0",n.style.textAlign="user"===t?"right":"left",n.innerHTML=`<span style="display:inline-block;max-width:80%;padding:8px 12px;border-radius:12px;${"user"===t?"background:#667eea;color:#fff;":"background:#eee;color:#222;"}">${e.replace(/\n/g,"<br>")}</span>`,i.appendChild(n),i.scrollTop=i.scrollHeight}window.toggleChat=d,t.onclick=d,s.onsubmit=async function(e){e.preventDefault();const t=a.value.trim();if(!t)return;o(t,"user"),a.value="",o("...","bot");try{const e=await fetch("https://32c8339e7b1c.ngrok-free.app/webchat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})}),n=await e.json();i.lastChild.innerHTML=`<span style="display:inline-block;max-width:80%;padding:8px 12px;border-radius:12px;background:#eee;color:#222;">${n.response||n.error||"–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞."}</span>`}catch(e){i.lastChild.innerHTML='<span style="display:inline-block;max-width:80%;padding:8px 12px;border-radius:12px;background:#eee;color:#222;">–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.</span>'}}})()`
